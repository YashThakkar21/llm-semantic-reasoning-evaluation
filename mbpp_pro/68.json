{
  "id": 68,
  "raw_solution": "    res = 1\n    i = 2\n    while i * i <= num:\n        if num % i == 0:\n            res += i\n            if i * i != num:\n                res += num / i\n        i += 1\n    return res\ndef amicable_numbers_sum(limit):\n    amicables = set()\n    for num in range(2, limit + 1):\n        if num in amicables:\n            continue\n        sum_fact = div_sum(num)\n        sum_fact2 = div_sum(sum_fact)\n        if num == sum_fact2 and num != sum_fact:\n            amicables.add(num)\n            amicables.add(sum_fact2)\n    return sum(amicables)\n",
  "test_code": "assert sum_amicable_numbers_in_ranges([(1, 300), (301, 500)]) == 504\nassert sum_amicable_numbers_in_ranges([(1, 1000)]) == 504\nassert sum_amicable_numbers_in_ranges([(1, 100), (101, 200), (201, 300)]) == 504",
  "raw_problem": "# Write a function to sum all amicable numbers from 1 to a specified number.\ndef div_sum(num):\n",
  "new_solution": "    total_sum = 0\n    for start, end in ranges:\n        total_sum += amicable_numbers_sum(end) - amicable_numbers_sum(start - 1)\n    return total_sum\n",
  "new_problem": "# Write a function to find the sum of all amicable numbers within multiple ranges provided as a list of tuples. Each tuple contains the start and end of a range. The function should return the total sum of amicable numbers found across all ranges.\ndef sum_amicable_numbers_in_ranges(ranges):\n"
}