{
  "id": 220,
  "raw_solution": "    if n > max_ending[1]:\n      max_ending = max((max_ending[0] * n, n), max_ending, key=lambda x: x[0])\n    else:\n      max_ending = (n, n)\n    if n > min_ending[1]:\n      min_ending = min((min_ending[0] * n, n), min_ending, key=lambda x: x[0])\n    else:\n      min_ending = (n, n)\n    ret = max(ret, max_ending, min_ending, key=lambda x: x[0])\n  return ret[0]\n",
  "test_code": "assert max_product_sum([[1, 2, 3], [4, 5, 6], [7, 8, 9]]) == 630\nassert max_product_sum([[10, 20], [30, 40], [50, 60]]) == 4400\nassert max_product_sum([[1, 1, 1], [2, 2, 2], [3, 3, 3]]) == 6",
  "raw_problem": "# Write a function to find the maximum product formed by multiplying numbers of an increasing subsequence of that array.\ndef max_product(arr):   \n  # record the correspond ending element to maintain the increasing subsequence\n  ret = max_ending = min_ending = (arr[0], arr[0])\n  for n in arr[1:]:\n",
  "new_solution": "    def max_product(subarr):\n        ret = max_ending = min_ending = (subarr[0], subarr[0])\n        for n in subarr[1:]:\n            if n > max_ending[1]:\n                max_ending = max((max_ending[0] * n, n), max_ending, key=lambda x: x[0])\n            else:\n                max_ending = (n, n)\n            if n > min_ending[1]:\n                min_ending = min((min_ending[0] * n, n), min_ending, key=lambda x: x[0])\n            else:\n                min_ending = (n, n)\n            ret = max(ret, max_ending, min_ending, key=lambda x: x[0])\n        return ret[0]\n\n    total_sum = 0\n    for subarr in arr:\n        total_sum += max_product(subarr)\n    return total_sum\n",
  "new_problem": "# Given a 2D array where each subarray contains integers, find the maximum product formed by multiplying numbers of an increasing subsequence for each subarray. Then, sum all the maximum products obtained from each subarray to get the final result.\ndef max_product_sum(arr):\n"
}